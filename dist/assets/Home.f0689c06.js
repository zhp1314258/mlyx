import{c as H,t as C,n as z,m as M,d as Y,r as ne,a as F,u as ce,b as _,w as I,e as Ce,f as ke,g as Be,o as re,h as Ge,i as Ie,j as Re,k as ze,l as Ee,p as f,q as oe,s as le,v as O,x as Oe,y as U,z as q,A as ue,B as X,C as Ae,D as De,E as Me,F as Ne,G as He,H as Ye,I as qe,J as Le,K as S,L as R,M as N,N as K,O as W,P as de,Q as j,R as se,S as Ve,T as ie}from"./index.d07cedeb.js";import{u as Ue,a as ve,g as fe}from"./index.a5eaa199.js";const[he,A]=H("swipe"),Xe={loop:C,width:z,height:z,vertical:Boolean,autoplay:M(0),duration:M(500),touchable:C,lazyRender:Boolean,initialSwipe:M(0),indicatorColor:String,showIndicators:C,stopPropagation:C},ge=Symbol(he);var Ke=Y({name:he,props:Xe,emits:["change"],setup(e,{emit:c,slots:s}){const u=ne(),h=ne(),t=F({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),r=Ue(),{children:y,linkChildren:P}=ce(ge),a=_(()=>y.length),i=_(()=>t[e.vertical?"height":"width"]),o=_(()=>e.vertical?r.deltaY.value:r.deltaX.value),d=_(()=>t.rect?(e.vertical?t.rect.height:t.rect.width)-i.value*a.value:0),g=_(()=>i.value?Math.ceil(Math.abs(d.value)/i.value):a.value),w=_(()=>a.value*i.value),x=_(()=>(t.active+a.value)%a.value),$=_(()=>{const n=e.vertical?"vertical":"horizontal";return r.direction.value===n}),L=_(()=>{const n={transitionDuration:`${t.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${t.offset}px)`};if(i.value){const v=e.vertical?"height":"width",l=e.vertical?"width":"height";n[v]=`${w.value}px`,n[l]=e[l]?`${e[l]}px`:""}return n}),ye=n=>{const{active:v}=t;return n?e.loop?U(v+n,-1,a.value):U(v+n,0,g.value):v},J=(n,v=0)=>{let l=n*i.value;e.loop||(l=Math.min(l,-d.value));let p=v-l;return e.loop||(p=U(p,d.value,0)),p},b=({pace:n=0,offset:v=0,emitChange:l})=>{if(a.value<=1)return;const{active:p}=t,m=ye(n),G=J(m,v);if(e.loop){if(y[0]&&G!==d.value){const V=G<d.value;y[0].setOffset(V?w.value:0)}if(y[a.value-1]&&G!==0){const V=G>0;y[a.value-1].setOffset(V?-w.value:0)}}t.active=m,t.offset=G,l&&m!==p&&c("change",x.value)},E=()=>{t.swiping=!0,t.active<=-1?b({pace:a.value}):t.active>=a.value&&b({pace:-a.value})},xe=()=>{E(),r.reset(),O(()=>{t.swiping=!1,b({pace:-1,emitChange:!0})})},Q=()=>{E(),r.reset(),O(()=>{t.swiping=!1,b({pace:1,emitChange:!0})})};let Z;const k=()=>clearTimeout(Z),B=()=>{k(),e.autoplay>0&&a.value>1&&(Z=setTimeout(()=>{Q(),B()},+e.autoplay))},T=(n=+e.initialSwipe)=>{if(!u.value)return;const v=()=>{var l,p;if(!oe(u)){const m={width:u.value.offsetWidth,height:u.value.offsetHeight};t.rect=m,t.width=+((l=e.width)!=null?l:m.width),t.height=+((p=e.height)!=null?p:m.height)}a.value&&(n=Math.min(a.value-1,n)),t.active=n,t.swiping=!0,t.offset=J(n),y.forEach(m=>{m.setOffset(0)}),B()};oe(u)?le().then(v):v()},ee=()=>T(t.active);let te;const be=n=>{!e.touchable||(r.start(n),te=Date.now(),k(),E())},Pe=n=>{e.touchable&&t.swiping&&(r.move(n),$.value&&(!e.loop&&(t.active===0&&o.value>0||t.active===a.value-1&&o.value<0)||(Oe(n,e.stopPropagation),b({offset:o.value}))))},ae=()=>{if(!e.touchable||!t.swiping)return;const n=Date.now()-te,v=o.value/n;if((Math.abs(v)>.25||Math.abs(o.value)>i.value/2)&&$.value){const p=e.vertical?r.offsetY.value:r.offsetX.value;let m=0;e.loop?m=p>0?o.value>0?-1:1:0:m=-Math[o.value>0?"ceil":"floor"](o.value/i.value),b({pace:m,emitChange:!0})}else o.value&&b({pace:0});t.swiping=!1,B()},Se=(n,v={})=>{E(),r.reset(),O(()=>{let l;e.loop&&n===a.value?l=t.active===0?0:n:l=n%a.value,v.immediate?O(()=>{t.swiping=!1}):t.swiping=!1,b({pace:l-t.active,emitChange:!0})})},$e=(n,v)=>{const l=v===x.value,p=l?{backgroundColor:e.indicatorColor}:void 0;return f("i",{style:p,class:A("indicator",{active:l})},null)},Te=()=>{if(s.indicator)return s.indicator({active:x.value,total:a.value});if(e.showIndicators&&a.value>1)return f("div",{class:A("indicators",{vertical:e.vertical})},[Array(a.value).fill("").map($e)])};return ve({prev:xe,next:Q,state:t,resize:ee,swipeTo:Se}),P({size:i,props:e,count:a,activeIndicator:x}),I(()=>e.initialSwipe,n=>T(+n)),I(a,()=>T(t.active)),I(()=>e.autoplay,B),I([Ce,ke],ee),I(Be(),n=>{n==="visible"?B():k()}),re(T),Ge(()=>T(t.active)),Ie(()=>T(t.active)),Re(k),ze(k),Ee("touchmove",Pe,{target:h}),()=>{var n;return f("div",{ref:u,class:A()},[f("div",{ref:h,style:L.value,class:A("track",{vertical:e.vertical}),onTouchstartPassive:be,onTouchend:ae,onTouchcancel:ae},[(n=s.default)==null?void 0:n.call(s)]),Te()])}}});const We=q(Ke),[je,Fe]=H("swipe-item");var Je=Y({name:je,setup(e,{slots:c}){let s;const u=F({offset:0,inited:!1,mounted:!1}),{parent:h,index:t}=ue(ge);if(!h)return;const r=_(()=>{const a={},{vertical:i}=h.props;return h.size.value&&(a[i?"height":"width"]=`${h.size.value}px`),u.offset&&(a.transform=`translate${i?"Y":"X"}(${u.offset}px)`),a}),y=_(()=>{const{loop:a,lazyRender:i}=h.props;if(!i||s)return!0;if(!u.mounted)return!1;const o=h.activeIndicator.value,d=h.count.value-1,g=o===0&&a?d:o-1,w=o===d&&a?0:o+1;return s=t.value===o||t.value===g||t.value===w,s}),P=a=>{u.offset=a};return re(()=>{le(()=>{u.mounted=!0})}),ve({setOffset:P}),()=>{var a;return f("div",{class:Fe(),style:r.value},[y.value?(a=c.default)==null?void 0:a.call(c):null])}}});const Qe=q(Je),[me,Ze]=H("grid"),et={square:Boolean,center:C,border:C,gutter:z,reverse:Boolean,iconSize:z,direction:String,clickable:Boolean,columnNum:M(4)},_e=Symbol(me);var tt=Y({name:me,props:et,setup(e,{slots:c}){const{linkChildren:s}=ce(_e);return s({props:e}),()=>{var u;return f("div",{style:{paddingLeft:X(e.gutter)},class:[Ze(),{[Ae]:e.border&&!e.gutter}]},[(u=c.default)==null?void 0:u.call(c)])}}});const we=q(tt),[at,D]=H("grid-item"),nt=De({},Me,{dot:Boolean,text:String,icon:String,badge:z,iconColor:String,iconPrefix:String,badgeProps:Object});var ot=Y({name:at,props:nt,setup(e,{slots:c}){const{parent:s,index:u}=ue(_e),h=Ne();if(!s)return;const t=_(()=>{const{square:i,gutter:o,columnNum:d}=s.props,g=`${100/+d}%`,w={flexBasis:g};if(i)w.paddingTop=g;else if(o){const x=X(o);w.paddingRight=x,u.value>=d&&(w.marginTop=x)}return w}),r=_(()=>{const{square:i,gutter:o}=s.props;if(i&&o){const d=X(o);return{right:d,bottom:d,height:"auto"}}}),y=()=>{if(c.icon)return f(qe,Ye({dot:e.dot,content:e.badge},e.badgeProps),{default:c.icon});if(e.icon)return f(Le,{dot:e.dot,name:e.icon,size:s.props.iconSize,badge:e.badge,class:D("icon"),color:e.iconColor,badgeProps:e.badgeProps,classPrefix:e.iconPrefix},null)},P=()=>{if(c.text)return c.text();if(e.text)return f("span",{class:D("text")},[e.text])},a=()=>c.default?c.default():[y(),P()];return()=>{const{center:i,border:o,square:d,gutter:g,reverse:w,direction:x,clickable:$}=s.props,L=[D("content",[x,{center:i,square:d,reverse:w,clickable:$,surround:o&&g}]),{[He]:o}];return f("div",{class:[D({square:d})],style:t.value},[f("div",{role:$?"button":void 0,class:L,style:r.value,tabindex:$?0:void 0,onClick:h},[a()])])}}});const pe=q(ot);const st={class:"good"},it=j("div",{class:"good-header"},[j("h3",null,"\u65B0\u54C1\u4E0A\u7EBF")],-1),ct={__name:"Goods",props:{title:{type:String,default:""},arr:{type:Array,default:[]}},setup(e){const c=e;return fe().then(s=>{c.arr.newGoodses=s.data.newGoodses,console.log(c.arr.newGoodses)}),(s,u)=>{const h=pe,t=we;return S(),R("div",st,[it,f(t,{"column-num":2},{default:N(()=>[(S(!0),R(K,null,W(s.newGoodses,r=>(S(),de(h,{key:r.goodsId,icon:"item.goodsCoverImg",text:"item.goodsName"}))),128))]),_:1})])}}};const rt={class:"home"},lt=["src"],vt={__name:"Home",setup(e){se(),se();let c=F({carousels:[],hotGoodses:[],newGoodses:[],recommendGoodses:[]}),{carousels:s,hotGoodses:u,newGoodses:h,recommendGoodses:t}=Ve(c);return fe().then(r=>{console.log(r),c.carousels=r.data.carousels}),(r,y)=>{const P=Qe,a=We,i=pe,o=we,d=ct;return S(),R("div",rt,[f(a,{class:"my-swipe",autoplay:3e3,"indicator-color":"white"},{default:N(()=>[(S(!0),R(K,null,W(ie(s),g=>(S(),de(P,{key:g.carouselUrl},{default:N(()=>[j("img",{src:g.carouselUrl,alt:""},null,8,lt)]),_:2},1024))),128))]),_:1}),f(o,{"column-num":5},{default:N(()=>[(S(),R(K,null,W(10,g=>f(i,{key:g,icon:"photo-o",text:"\u6587\u5B57"})),64))]),_:1}),f(d,{arr:ie(c)},null,8,["arr"])])}}};export{vt as default};
