import{c as F,p as i,d as W,b as D,D as Y,ac as Ae,n as V,a1 as P,B as ce,z as H,E as ue,F as de,ad as De,J as E,x as J,U as Oe,t as p,V as j,_ as O,u as Fe,ae as fe,af as We,ag as He,aa as qe,ah as pe,ai as Ue,m as je,a as ge,r as K,A as Ke,a2 as Je,w as Ye,s as U,o as Ze,l as Qe,aj as ae,ak as Ge,al as Xe,H as et,am as me,an as tt,ao as nt,a7 as ie,ap as at,Z as it,ab as he,K as ve,L as be,Q as $,aq as lt,S as rt,M as Q,T as M,ar as G,$ as ot,as as st,at as le,au as ct,av as ut}from"./index.d07cedeb.js";import{a as ye,l as dt,s as re,r as ft}from"./index.a5eaa199.js";const[gt,q]=F("loading"),mt=Array(12).fill(null).map((e,n)=>i("i",{class:q("line",String(n+1))},null)),ht=i("svg",{class:q("circular"),viewBox:"25 25 50 50"},[i("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),vt={size:V,type:P("circular"),color:String,vertical:Boolean,textSize:V,textColor:String};var bt=W({name:gt,props:vt,setup(e,{slots:n}){const a=D(()=>Y({color:e.color},Ae(e.size))),c=()=>{const o=e.type==="spinner"?mt:ht;return i("span",{class:q("spinner",e.type),style:a.value},[n.icon?n.icon():o])},r=()=>{var o;if(n.default)return i("span",{class:q("text"),style:{fontSize:ce(e.textSize),color:(o=e.textColor)!=null?o:e.color}},[n.default()])};return()=>{const{type:o,vertical:_}=e;return i("div",{class:q([o,{vertical:_}]),"aria-live":"polite","aria-busy":!0},[c(),r()])}}});const yt=H(bt),[St,z]=F("button"),xt=Y({},ue,{tag:P("button"),text:String,icon:String,type:P("default"),size:P("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:P("button"),loadingSize:V,loadingText:String,loadingType:String,iconPosition:P("left")});var Ct=W({name:St,props:xt,emits:["click"],setup(e,{emit:n,slots:a}){const c=de(),r=()=>a.loading?a.loading():i(yt,{size:e.loadingSize,type:e.loadingType,class:z("loading")},null),o=()=>{if(e.loading)return r();if(a.icon)return i("div",{class:z("icon")},[a.icon()]);if(e.icon)return i(E,{name:e.icon,class:z("icon"),classPrefix:e.iconPrefix},null)},_=()=>{let l;if(e.loading?l=e.loadingText:l=a.default?a.default():e.text,l)return i("span",{class:z("text")},[l])},I=()=>{const{color:l,plain:f}=e;if(l){const b={color:f?l:"white"};return f||(b.background=l),l.includes("gradient")?b.border=0:b.borderColor=l,b}},u=l=>{e.loading?J(l):e.disabled||(n("click",l),c())};return()=>{const{tag:l,type:f,size:b,block:w,round:T,plain:y,square:h,loading:s,disabled:d,hairline:v,nativeType:S,iconPosition:x}=e,N=[z([f,b,{plain:y,block:w,round:T,square:h,loading:s,disabled:d,hairline:v}]),{[De]:v}];return i(l,{type:S,class:N,style:I(),disabled:d,onClick:u},{default:()=>[i("div",{class:z("content")},[x==="left"&&o(),_(),x==="right"&&o()])]})}}});const _t=H(Ct);let wt=0;function kt(){const e=Oe(),{name:n="unknown"}=(e==null?void 0:e.type)||{};return`${n}-${++wt}`}const[It,A]=F("cell"),Se={tag:P("div"),icon:String,size:String,title:V,value:V,label:V,center:Boolean,isLink:Boolean,border:p,required:Boolean,iconPrefix:String,valueClass:j,labelClass:j,titleClass:j,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},Tt=Y({},Se,ue);var Bt=W({name:It,props:Tt,setup(e,{slots:n}){const a=de(),c=()=>{if(n.label||O(e.label))return i("div",{class:[A("label"),e.labelClass]},[n.label?n.label():e.label])},r=()=>{var u;if(n.title||O(e.title)){const l=(u=n.title)==null?void 0:u.call(n);return Array.isArray(l)&&l.length===0?void 0:i("div",{class:[A("title"),e.titleClass],style:e.titleStyle},[l||i("span",null,[e.title]),c()])}},o=()=>{const u=n.value||n.default;if(u||O(e.value))return i("div",{class:[A("value"),e.valueClass]},[u?u():i("span",null,[e.value])])},_=()=>{if(n.icon)return n.icon();if(e.icon)return i(E,{name:e.icon,class:A("left-icon"),classPrefix:e.iconPrefix},null)},I=()=>{if(n["right-icon"])return n["right-icon"]();if(e.isLink){const u=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return i(E,{name:u,class:A("right-icon")},null)}};return()=>{var u;const{tag:l,size:f,center:b,border:w,isLink:T,required:y}=e,h=(u=e.clickable)!=null?u:T,s={center:b,required:y,clickable:h,borderless:!w};return f&&(s[f]=!!f),i(l,{class:A(s),role:h?"button":void 0,tabindex:h?0:void 0,onClick:a},{default:()=>{var d;return[_(),r(),o(),I(),(d=n.extra)==null?void 0:d.call(n)]}})}}});const Pt=H(Bt),[Vt,Mt]=F("form"),Lt={colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:V,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:p,showErrorMessage:p,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var Et=W({name:Vt,props:Lt,emits:["submit","failed"],setup(e,{emit:n,slots:a}){const{children:c,linkChildren:r}=Fe(fe),o=s=>s?c.filter(d=>s.includes(d.name)):c,_=s=>new Promise((d,v)=>{const S=[];o(s).reduce((N,Z)=>N.then(()=>{if(!S.length)return Z.validate().then(R=>{R&&S.push(R)})}),Promise.resolve()).then(()=>{S.length?v(S):d()})}),I=s=>new Promise((d,v)=>{const S=o(s);Promise.all(S.map(x=>x.validate())).then(x=>{x=x.filter(Boolean),x.length?v(x):d()})}),u=s=>{const d=c.find(v=>v.name===s);return d?new Promise((v,S)=>{d.validate().then(x=>{x?S(x):v()})}):Promise.reject()},l=s=>typeof s=="string"?u(s):e.validateFirst?_(s):I(s),f=s=>{typeof s=="string"&&(s=[s]),o(s).forEach(v=>{v.resetValidation()})},b=()=>c.reduce((s,d)=>(s[d.name]=d.getValidationStatus(),s),{}),w=(s,d)=>{c.some(v=>v.name===s?(v.$el.scrollIntoView(d),!0):!1)},T=()=>c.reduce((s,d)=>(s[d.name]=d.formValue.value,s),{}),y=()=>{const s=T();l().then(()=>n("submit",s)).catch(d=>{n("failed",{values:s,errors:d}),e.scrollToError&&d[0].name&&w(d[0].name)})},h=s=>{J(s),y()};return r({props:e}),ye({submit:y,validate:l,getValues:T,scrollToField:w,resetValidation:f,getValidationStatus:b}),()=>{var s;return i("form",{class:Mt(),onSubmit:h},[(s=a.default)==null?void 0:s.call(a)])}}});const Nt=H(Et);function xe(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function Rt(e,n){if(xe(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function $t(e,n){return new Promise(a=>{const c=n.validator(e,n);if(pe(c)){c.then(a);return}a(c)})}function oe(e,n){const{message:a}=n;return Ue(a)?a(e,n):a||""}function zt({target:e}){e.composing=!0}function se({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function At(e,n){const a=We();e.style.height="auto";let c=e.scrollHeight;if(qe(n)){const{maxHeight:r,minHeight:o}=n;r!==void 0&&(c=Math.min(c,r)),o!==void 0&&(c=Math.max(c,o))}c&&(e.style.height=`${c}px`,He(a))}function Dt(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function X(e){return[...e].length}function Ot(e,n){return[...e].slice(0,n).join("")}const[Ft,B]=F("field"),Wt={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:V,formatter:Function,clearIcon:P("clear"),modelValue:je(""),inputAlign:String,placeholder:String,autocomplete:String,errorMessage:String,enterkeyhint:String,clearTrigger:P("focus"),formatTrigger:P("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},Ht=Y({},Se,Wt,{rows:V,type:P("text"),rules:Array,autosize:[Boolean,Object],labelWidth:V,labelClass:j,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var qt=W({name:Ft,props:Ht,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:a}){const c=kt(),r=ge({status:"unvalidated",focused:!1,validateMessage:""}),o=K(),_=K(),I=K(),{parent:u}=Ke(fe),l=()=>{var t;return String((t=e.modelValue)!=null?t:"")},f=t=>{if(O(e[t]))return e[t];if(u&&O(u.props[t]))return u.props[t]},b=D(()=>{const t=f("readonly");if(e.clearable&&!t){const g=l()!=="",m=e.clearTrigger==="always"||e.clearTrigger==="focus"&&r.focused;return g&&m}return!1}),w=D(()=>I.value&&a.input?I.value():e.modelValue),T=t=>t.reduce((g,m)=>g.then(()=>{if(r.status==="failed")return;let{value:k}=w;if(m.formatter&&(k=m.formatter(k,m)),!Rt(k,m)){r.status="failed",r.validateMessage=oe(k,m);return}if(m.validator)return xe(k)&&m.validateEmpty===!1?void 0:$t(k,m).then(C=>{C&&typeof C=="string"?(r.status="failed",r.validateMessage=C):C===!1&&(r.status="failed",r.validateMessage=oe(k,m))})}),Promise.resolve()),y=()=>{r.status="unvalidated",r.validateMessage=""},h=()=>n("endValidate",{status:r.status,message:r.validateMessage}),s=(t=e.rules)=>new Promise(g=>{y(),t?(n("startValidate"),T(t).then(()=>{r.status==="failed"?(g({name:e.name,message:r.validateMessage}),h()):(r.status="passed",g(),h())})):g()}),d=t=>{if(u&&e.rules){const{validateTrigger:g}=u.props,m=ae(g).includes(t),k=e.rules.filter(C=>C.trigger?ae(C.trigger).includes(t):m);k.length&&s(k)}},v=t=>{const{maxlength:g}=e;if(O(g)&&X(t)>g){const m=l();return m&&X(m)===+g?m:Ot(t,+g)}return t},S=(t,g="onChange")=>{const m=t;t=v(t);const k=t!==m;if(e.type==="number"||e.type==="digit"){const C=e.type==="number";t=Ge(t,C,C)}if(e.formatter&&g===e.formatTrigger&&(t=e.formatter(t)),o.value&&o.value.value!==t)if(r.focused&&k){const{selectionStart:C,selectionEnd:ze}=o.value;o.value.value=t,o.value.setSelectionRange(C-1,ze-1)}else o.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},x=t=>{t.target.composing||S(t.target.value)},N=()=>{var t;return(t=o.value)==null?void 0:t.blur()},Z=()=>{var t;return(t=o.value)==null?void 0:t.focus()},R=()=>{const t=o.value;e.type==="textarea"&&e.autosize&&t&&At(t,e.autosize)},Ce=t=>{r.focused=!0,n("focus",t),U(R),f("readonly")&&N()},_e=t=>{f("readonly")||(r.focused=!1,S(l(),"onBlur"),n("blur",t),d("onBlur"),U(R),tt())},ee=t=>n("clickInput",t),we=t=>n("clickLeftIcon",t),ke=t=>n("clickRightIcon",t),Ie=t=>{J(t),n("update:modelValue",""),n("clear",t)},te=D(()=>{if(typeof e.error=="boolean")return e.error;if(u&&u.props.showError&&r.status==="failed")return!0}),Te=D(()=>{const t=f("labelWidth");if(t)return{width:ce(t)}}),Be=t=>{t.keyCode===13&&(!(u&&u.props.submitOnEnter)&&e.type!=="textarea"&&J(t),e.type==="search"&&N()),n("keypress",t)},ne=()=>e.id||`${c}-input`,Pe=()=>r.status,Ve=()=>{const t=B("control",[f("inputAlign"),{error:te.value,custom:!!a.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(a.input)return i("div",{class:t,onClick:ee},[a.input()]);const g={id:ne(),ref:o,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:f("disabled"),readonly:f("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,enterkeyhint:e.enterkeyhint,"aria-labelledby":e.label?`${c}-label`:void 0,onBlur:_e,onFocus:Ce,onInput:x,onClick:ee,onChange:se,onKeypress:Be,onCompositionend:se,onCompositionstart:zt};return e.type==="textarea"?i("textarea",g,null):i("input",et(Dt(e.type),g),null)},Me=()=>{const t=a["left-icon"];if(e.leftIcon||t)return i("div",{class:B("left-icon"),onClick:we},[t?t():i(E,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},Le=()=>{const t=a["right-icon"];if(e.rightIcon||t)return i("div",{class:B("right-icon"),onClick:ke},[t?t():i(E,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Ee=()=>{if(e.showWordLimit&&e.maxlength){const t=X(l());return i("div",{class:B("word-limit")},[i("span",{class:B("word-num")},[t]),me("/"),e.maxlength])}},Ne=()=>{if(u&&u.props.showErrorMessage===!1)return;const t=e.errorMessage||r.validateMessage;if(t){const g=a["error-message"],m=f("errorMessageAlign");return i("div",{class:B("error-message",m)},[g?g({message:t}):t])}},Re=()=>{const t=f("colon")?":":"";if(a.label)return[a.label(),t];if(e.label)return i("label",{id:`${c}-label`,for:ne()},[e.label+t])},$e=()=>[i("div",{class:B("body")},[Ve(),b.value&&i(E,{ref:_,name:e.clearIcon,class:B("clear")},null),Le(),a.button&&i("div",{class:B("button")},[a.button()])]),Ee(),Ne()];return ye({blur:N,focus:Z,validate:s,formValue:w,resetValidation:y,getValidationStatus:Pe}),Je(Xe,{customValue:I,resetValidation:y,validateWithTrigger:d}),Ye(()=>e.modelValue,()=>{S(l()),y(),d("onChange"),U(R)}),Ze(()=>{S(l(),e.formatTrigger),U(R)}),Qe("touchstart",Ie,{target:D(()=>{var t;return(t=_.value)==null?void 0:t.$el})}),()=>{const t=f("disabled"),g=f("labelAlign"),m=Me(),k=()=>{const C=Re();return g==="top"?[m,C].filter(Boolean):C||[]};return i(Pt,{size:e.size,class:B({error:te.value,disabled:t,[`label-${g}`]:g}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:Te.value,valueClass:B("value"),titleClass:[B("label",[g,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:m&&g!=="top"?()=>m:null,title:k,value:$e,extra:a.extra})}}});const pt=H(qt),[Ut,L]=F("nav-bar"),jt={title:String,fixed:Boolean,zIndex:V,border:p,leftText:String,rightText:String,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:p};var Kt=W({name:Ut,props:jt,emits:["clickLeft","clickRight"],setup(e,{emit:n,slots:a}){const c=K(),r=nt(c,L),o=f=>n("clickLeft",f),_=f=>n("clickRight",f),I=()=>a.left?a.left():[e.leftArrow&&i(E,{class:L("arrow"),name:"arrow-left"},null),e.leftText&&i("span",{class:L("text")},[e.leftText])],u=()=>a.right?a.right():i("span",{class:L("text")},[e.rightText]),l=()=>{const{title:f,fixed:b,border:w,zIndex:T}=e,y=it(T),h=e.leftArrow||e.leftText||a.left,s=e.rightText||a.right;return i("div",{ref:c,style:y,class:[L({fixed:b}),{[at]:w,"van-safe-area-top":e.safeAreaInsetTop}]},[i("div",{class:L("content")},[h&&i("div",{class:[L("left"),e.clickable?ie:""],onClick:o},[I()]),i("div",{class:[L("title"),"van-ellipsis"]},[a.title?a.title():f]),s&&i("div",{class:[L("right"),e.clickable?ie:""],onClick:_},[u()])])])};return()=>e.fixed&&e.placeholder?r(l):l()}});const Jt=H(Kt);const Yt="/assets/logo.1e8c34ec.png",Zt={name:"verify",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:25},fontSizeMax:{type:Number,default:35},backgroundColorMin:{type:Number,default:200},backgroundColorMax:{type:Number,default:220},dotColorMin:{type:Number,default:60},dotColorMax:{type:Number,default:120},contentWidth:{type:Number,default:90},contentHeight:{type:Number,default:38}},methods:{randomNum(e,n){return Math.floor(Math.random()*(n-e)+e)},randomColor(e,n){let a=this.randomNum(e,n),c=this.randomNum(e,n),r=this.randomNum(e,n);return"rgb("+a+","+c+","+r+")"},drawPic(){let n=document.getElementById("s-canvas").getContext("2d");n.textBaseline="bottom",n.fillStyle="#e6ecfd",n.fillRect(0,0,this.contentWidth,this.contentHeight);for(let a=0;a<this.identifyCode.length;a++)this.drawText(n,this.identifyCode[a],a);this.drawLine(n),this.drawDot(n)},drawText(e,n,a){e.fillStyle=this.randomColor(50,160),e.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";let c=(a+1)*(this.contentWidth/(this.identifyCode.length+1)),r=this.randomNum(this.fontSizeMax,this.contentHeight-5);var o=this.randomNum(-30,30);e.translate(c,r),e.rotate(o*Math.PI/180),e.fillText(n,0,0),e.rotate(-o*Math.PI/180),e.translate(-c,-r)},drawLine(e){for(let n=0;n<4;n++)e.strokeStyle=this.randomColor(100,200),e.beginPath(),e.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.stroke()},drawDot(e){for(let n=0;n<30;n++)e.fillStyle=this.randomColor(0,255),e.beginPath(),e.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),e.fill()}},watch:{identifyCode(){this.drawPic()}},mounted(){this.drawPic()}},Qt={class:"s-canvas"},Gt=["width","height"];function Xt(e,n,a,c,r,o){return ve(),be("div",Qt,[$("canvas",{id:"s-canvas",width:a.contentWidth,height:a.contentHeight},null,8,Gt)])}const en=he(Zt,[["render",Xt]]);const tn=e=>(ct("data-v-e41e0e72"),e=e(),ut(),e),nn={class:"login"},an=tn(()=>$("img",{src:Yt,alt:""},null,-1)),ln={class:"verify",style:{display:"flex",width:"100%","margin-top":"10px"}},rn={style:{margin:"16px"}},on={__name:"Login",setup(e){let n=lt(),a=ge({username:"17001100999",password:"123456",isTitle:!0}),{username:c,password:r,isTitle:o}=rt(a),_=()=>{},I=()=>{a.isTitle?dt(a.username,a.password).then(u=>{u.resultCode==200&&(localStorage.setItem("mltoken",u.data),n.replace("/home"),re({type:"success",message:"\u767B\u5F55\u6210\u529F"}))}):ft(a.username,a.password).then(u=>{u.resultCode==200&&(re({type:"success",message:"\u6CE8\u518C\u6210\u529F"}),a.isTitle=!0)})};return(u,l)=>{const f=E,b=Jt,w=pt,T=_t,y=Nt;return ve(),be("div",nn,[i(b,{title:M(o)?"\u767B\u5F55":"\u6CE8\u518C","left-arrow":"",onClickLeft:M(_)},{right:Q(()=>[i(f,{name:"ellipsis",size:"18"})]),_:1},8,["title","onClickLeft"]),an,i(y,{onSubmit:M(I)},{default:Q(()=>[i(w,{modelValue:M(c),"onUpdate:modelValue":l[0]||(l[0]=h=>G(c)?c.value=h:c=h),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"]),i(w,{modelValue:M(r),"onUpdate:modelValue":l[1]||(l[1]=h=>G(r)?r.value=h:r=h),type:"password",name:"\u5BC6\u7801",label:"\u5BC6\u7801",placeholder:"\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5BC6\u7801"}]},null,8,["modelValue"]),$("div",ln,[ot($("input",{type:"text",placeholder:"\u9A8C\u8BC1\u7801","onUpdate:modelValue":l[2]||(l[2]=h=>u.identifyVal=h)},null,512),[[st,u.identifyVal]]),$("div",{class:"code",onClick:l[3]||(l[3]=(...h)=>u.refreshCode&&u.refreshCode(...h)),style:{width:"112px"}},[i(en)])]),$("div",rn,[$("p",{class:"link-register",onClick:l[4]||(l[4]=h=>G(o)?o.value=!M(o):o=!M(o))},le(M(o)?"\u7ACB\u5373\u6CE8\u518C":"\u5DF2\u6709\u8D26\u53F7\uFF0C\u7ACB\u5373\u767B\u5F55"),1),i(T,{round:"",block:"",type:"primary","native-type":"submit"},{default:Q(()=>[me(le(M(o)?"\u767B\u5F55":"\u6CE8\u518C"),1)]),_:1})])]),_:1},8,["onSubmit"])])}}},un=he(on,[["__scopeId","data-v-e41e0e72"]]);export{un as default};
